---
layout: post
title: Criando um pacote de funções no R
comments: true
---

Uma das melhores práticas pra quem está programando em R é criar seu pacote pessoal de funções. Ao criar nosso pacote de funções, podemos centralizar nossos esforços pra uso futuro e criar um repositório de fácil manipulação.

Um pacote pode conter diversas features (banco de dados, vinhetas, shiny apps e até arquivos pra instalação externa), mas apenas duas são essenciais para a compilação do pacote: as funções (.R) e a documentação das funções, as quais vamos abordar nesse primeiro post.

**Pacotes necessários**

O primeiro passo para criar nosso pacote de funções é instalar os pacotes:

- **devtools**: Utilizado para criar e checar o pacote de funções.

- **roxygen2**: Para escrever a documentação das funções do pacote.

```r
install.packages(c("devtools", "roxygen2"))
```

**Criação do pacote**

Defina o local (diretório) onde você deseja que os arquivos do pacote de funções sejam salvos, inclusive com o nome da pasta que será criada para isso. No caso do exemplo abaixo, nosso pacote se chamará "VariavelAleatoria" com pasta homônima localizada em "C:/Users/Adelmo/Documents/GitHub".

```r
devtools::create("C:/Users/Adelmo/Documents/GitHub/VariavelAleatoria")
```

Experimente verificar a pasta gerada, você verá que seis novos arquivos estarão presentes.

![Arquivos na pasta "VariavelAleatoria"](http://i.imgur.com/I69Clul.png)

Vamos entender o uso de cada um destes.

- **Pasta "R"**: Nesta pasta iremos salvar nossas funções, no caso os scripts (.R).

- **.gitgnore**: Neste arquivo podemos selecionar as extensões de arquivos que devem ser ignoradas pelo git. Já estará predefinido nele para ignorar as extensões ".Rproj.user", ".Rhistory" e ".RData".

- **VariavelAleatoria.Rproj**: Este é o arquivo de projeto do R contendo as opções do projeto. Se quiser se informar mais sobre essa extensão [acesse aqui](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects).

- **.Rbuildignore**: Este arquivo tem função equivalente ao ".gitgnore". As extensões escritas nele serão ignorados no processo de geração do pacote de funções (.tar.gz).

- **DESCRIPTION**: Este arquivo é a capa do nosso pacote, ela deve conter o nome do pacote, sua versão, os autores do pacote, a licença etc. Completar os campos disponíveis é bem intuitivo.

Caso tenha dúvidas com relação a qual licença você quer vincular seu pacote, acesse o excelente site [choosealicense.com](http://choosealicense.com/).

- **NAMESPACE**: O arquivo NAMESPACE é responsável por fazer a interação do seu pacote com o R (exportando as funções dele) e do R com o pacote (importando funções de outros pacotes necessárias para seu pacote). Felizmente não precisamos escrever nada nele, toda sua documentação será redigida por meio do pacote "roxygen2".

Antes de passarmos para o próximo passo, complete as informações do DESCRIPTION e adicione o script de uma função na pasta "R". Caso não tenha nenhum script por perto, pode utilizar o singelo exemplo abaixo.

```r
randon4 <- function(x){
  
  # Geração de um número aleatório natural entre 3 e 5
  
  y <- 4*x/x
  
  return(y)
  
}
```

**Documentação da função**



**Load, check and build**



```r
setwd("C:/Users/Adelmo/Documents/GitHub/VariavelAleatoria")